# 📝 Практические задания для главы 11

📖 [Вернуться к теории](../README.md) | 📁 [Учебные файлы](../files/README.md) | ✅ [Чек-лист](../checklist.md)

## 📊 Задание 1: Создание модели данных и базовых визуализаций

**Описание:**  
Создайте первый дашборд в Power BI с правильной моделью данных и базовыми визуализациями для анализа продаж.

**Что нужно сделать:**

### A. Подключение и трансформация данных
1. Загрузите данные из файлов:
   - `files/sales_fact.csv` — основная таблица продаж
   - `files/products_dim.csv` — справочник товаров
   - `files/customers_dim.csv` — справочник клиентов
   - `files/calendar_dim.csv` — календарная таблица

2. **Импорт данных в Power BI:**
   - Откройте Power BI Desktop
   - File → Get Data → Text/CSV
   - Импортируйте все 4 файла поочередно
   - Проверьте типы данных в Power Query Editor

3. **Очистка данных в Power Query:**
   - В таблице sales_fact измените тип данных OrderDate на Date
   - Убедитесь, что числовые поля имеют правильный тип
   - Удалите строки с пустыми значениями, если есть
   - Нажмите "Закрыть и применить"

### B. Моделирование данных
1. **Создание связей:**
   - Перейдите на вкладку "Модель"
   - Создайте связи между таблицами:
     * sales_fact[ProductID] → products_dim[ProductID] (Many-to-One)
     * sales_fact[CustomerID] → customers_dim[CustomerID] (Many-to-One)
     * sales_fact[OrderDate] → calendar_dim[Date] (Many-to-One)

2. **Настройка модели:**
   - Убедитесь, что все связи активны
   - Скройте ID поля от пользователей (щелчок правой кнопкой → "Скрыть")

### C. Создание базовых DAX мер
```dax
// Основные показатели продаж
Общие продажи = SUM(sales_fact[TotalAmount])

Количество заказов = COUNT(sales_fact[OrderID])

Средний чек = AVERAGE(sales_fact[TotalAmount])

Уникальные клиенты = DISTINCTCOUNT(sales_fact[CustomerID])

// Показатели эффективности
Общее количество = SUM(sales_fact[Quantity])
```

### D. Построение первых визуализаций
1. **KPI карточки:**
   - Создайте 4 карточки (Card) с основными показателями
   - Настройте форматирование чисел (валюта, разделители тысяч)

2. **Столбчатые диаграммы:**
   - Продажи по категориям товаров
   - Продажи по месяцам
   - Топ-5 клиентов по сумме покупок

3. **Линейный график:**
   - Динамика продаж по времени

**Ожидаемый результат:**  
Базовый дашборд с 7-8 визуализациями, показывающий ключевые метрики продаж.

---

## 🎯 Задание 2: Продвинутые DAX вычисления и анализ времени

**Описание:**  
Расширьте дашборд сложными аналитическими мерами и анализом временных трендов.

**Что нужно сделать:**

### A. Time Intelligence меры
```dax
// Сравнение с предыдущим периодом
Продажи прошлый год = 
CALCULATE(
    [Общие продажи],
    PREVIOUSYEAR(calendar_dim[Date])
)

Рост продаж = 
DIVIDE(
    [Общие продажи] - [Продажи прошлый год],
    [Продажи прошлый год],
    0
)

Продажи с начала года = 
TOTALYTD([Общие продажи], calendar_dim[Date])
```

### B. Ранжирование и условная логика
```dax
// Ранжирование товаров
Рейтинг товара = 
RANKX(
    ALL(products_dim[ProductName]),
    [Общие продажи],
    ,
    DESC
)

// Статус продаж
Статус продаж = 
SWITCH(
    TRUE(),
    [Рост продаж] >= 0.1, "🟢 Отличный рост",
    [Рост продаж] >= 0, "🟡 Стабильно",
    [Рост продаж] >= -0.1, "🟠 Небольшое снижение",
    "🔴 Требует внимания"
)
```

### C. Клиентская аналитика
```dax
// Анализ клиентов
Средняя сумма покупки клиента = 
DIVIDE([Общие продажи], [Уникальные клиенты], 0)

Повторные клиенты = 
CALCULATE(
    [Уникальные клиенты],
    FILTER(
        customers_dim,
        CALCULATE(COUNT(sales_fact[OrderID])) > 1
    )
)
```

### D. Продвинутые визуализации
1. **Матрица с условным форматированием:**
   - Продажи по товарам и месяцам
   - Тепловая карта по значениям продаж

2. **Комбинированный график:**
   - Столбцы: месячные продажи
   - Линия: накопительный итог

3. **Воронка:**
   - Этапы: категории товаров по объему продаж

**Ожидаемый результат:**  
Расширенный дашборд с продвинутыми аналитическими возможностями и сравнением периодов.

---

## 🗺 Задание 3: Геоаналитика и интерактивные карты

**Описание:**  
Создайте дашборд с географической аналитикой для анализа продаж по регионам.

**Что нужно сделать:**

### A. Подготовка географических данных
1. Используйте файл `files/sales_geography.csv`
2. Убедитесь, что есть поля:
   - Названия городов и регионов
   - Координаты (Latitude, Longitude)
   - Данные о продажах по городам

### B. Создание географических визуализаций
1. **Bubble Map (Пузырьковая карта):**
   - Местоположение: координаты городов
   - Размер пузырьков: объем продаж
   - Цвет: рентабельность или регион

2. **Filled Map (Закрашенная карта):**
   - География: регионы России
   - Интенсивность закраски: плотность продаж

3. **Shape Map:**
   - Если есть файл границ регионов
   - Детализация по областям

### C. Географические расчеты
```dax
// Плотность продаж
Плотность продаж = 
DIVIDE(
    [Общие продажи],
    MAX(sales_geography[Population]),
    0
) * 1000

// Доля от общих продаж
Доля региона = 
DIVIDE(
    [Общие продажи],
    CALCULATE([Общие продажи], ALL(sales_geography)),
    0
)
```

### D. Интерактивность
1. **Срезы по регионам** для фильтрации всего дашборда
2. **Drill-down** от страны к региону к городу
3. **Синхронизация** между картой и другими графиками

**Ожидаемый результат:**  
Геоаналитический дашборд с интерактивными картами и пространственным анализом продаж.

---

## 💰 Задание 4: Финансовый дашборд с P&L анализом

**Описание:**  
Создайте финансовый дашборд для анализа доходов, расходов и прибыльности компании.

**Что нужно сделать:**

### A. Финансовая модель данных
1. Загрузите файлы:
   - `files/financial_data.csv` — финансовые транзакции
   - `files/budget_data.csv` — бюджетные показатели

2. Создайте связи с календарной таблицей

### B. Финансовые DAX меры
```dax
// Основные финансовые показатели
Доходы = 
CALCULATE(
    SUM(financial_data[Amount]),
    financial_data[Account_Type] = "Revenue"
)

Расходы = 
CALCULATE(
    SUM(financial_data[Amount]),
    financial_data[Account_Type] = "Expenses"
)

Чистая прибыль = [Доходы] + [Расходы]  // Расходы отрицательные

Рентабельность = 
DIVIDE([Чистая прибыль], [Доходы], 0)
```

### C. Бюджетный анализ
```dax
// План vs Факт
Бюджет = SUM(budget_data[Budget_Amount])

Отклонение = [Доходы] - [Бюджет]

Выполнение бюджета % = 
DIVIDE([Доходы], [Бюджет], 0)

Статус бюджета = 
IF(
    [Выполнение бюджета %] >= 1.05, "🟢 Превышение",
    IF([Выполнение бюджета %] >= 0.95, "🟡 В пределах", "🔴 Недовыполнение")
)
```

### D. Финансовые визуализации
1. **Waterfall Chart** — структура P&L
2. **Gauge Chart** — выполнение бюджета
3. **Комбинированный график** — план vs факт по месяцам
4. **Матрица** — детализация по статьям доходов/расходов

**Ожидаемый результат:**  
Финансовый дашборд с P&L анализом, бюджетным контролем и ключевыми финансовыми показателями.

---

## 📱 Задание 5: Executive Dashboard с мобильной оптимизацией

**Описание:**  
Создайте исполнительный дашборд для топ-менеджмента с оптимизацией под мобильные устройства.

**Что нужно сделать:**

### A. Дизайн для руководителей
1. **Принципы Executive Dashboard:**
   - Минимум визуализаций, максимум инсайтов
   - Крупные числа и четкие тренды
   - Интуитивная навигация
   - Фокус на ключевых решениях

### B. Ключевые показатели эффективности
```dax
// Комплексные KPI
Индекс эффективности бизнеса = 
VAR РостВыручки = [Рост продаж]
VAR Рентабельность = [Рентабельность]
VAR УдержаниеКлиентов = [Повторные клиенты] / [Уникальные клиенты]

RETURN
(РостВыручки * 0.4 + Рентабельность * 0.4 + УдержаниеКлиентов * 0.2) * 100

// Динамические заголовки
Заголовок продаж = 
VAR Рост = [Рост продаж]
VAR Направление = IF(Рост > 0, "📈", "📉")
VAR Месяц = SELECTEDVALUE(calendar_dim[MonthName])

RETURN
"Продажи " & Направление & " " & FORMAT(Рост, "0.0%") & " в " & Месяц
```

### C. Mobile Layout
1. **Phone Layout:**
   - Создайте отдельную мобильную версию
   - Вертикальное расположение элементов
   - Крупные touch-friendly кнопки
   - Упрощенные визуализации

2. **Адаптивные элементы:**
   - Приоритизация контента по важности
   - Автоматическое скрытие менее важных элементов
   - Оптимизированные шрифты и цвета

### D. Интерактивные элементы
1. **Bookmarks** для быстрой навигации
2. **Drill-through** к детальным отчетам
3. **Tooltip pages** с дополнительной информацией
4. **Automated insights** через Quick Insights

### E. Публикация и настройка
1. **Публикация в Power BI Service:**
   - Создайте workspace для команды
   - Настройте права доступа
   - Создайте App для внешних пользователей

2. **Автоматическое обновление:**
   - Настройте Scheduled Refresh
   - Установите уведомления об ошибках
   - Протестируйте обновление данных

**Ожидаемый результат:**  
Профессиональный Executive Dashboard с мобильной версией, готовый для использования топ-менеджментом.

---

## 💡 Методические рекомендации

### 📊 Структура хорошего дашборда:
```
Верхняя часть — Ключевые KPI (карточки)
Центральная часть — Основные графики и тренды
Боковая панель — Фильтры и управление
Нижняя часть — Детализация и дополнительные данные
```

### 🎨 Принципы дизайна:
- **Правило 5-7 элементов** — не перегружайте страницу
- **Единая цветовая схема** — используйте корпоративные цвета
- **Иерархия важности** — важное крупнее и ярче
- **Белое пространство** — не заполняйте каждый пиксель

### 🔧 Оптимизация производительности:
- **Правильная модель данных** — используйте Star Schema
- **Эффективные DAX меры** — избегайте calculated columns
- **Фильтрация данных** — загружайте только нужное
- **Тестирование** — проверяйте скорость работы

### 📱 Mobile-First подход:
- **Вертикальная навигация** — сверху вниз
- **Крупные элементы** — минимум 44px для касания
- **Простые визуализации** — избегайте сложных графиков
- **Быстрая загрузка** — оптимизируйте размер данных

---

- 🔙 [Предыдущая глава: Глава 10 - Когортный анализ и кластеризация](../chapter-10/README.md)  
- 🔜 [Следующая глава: Глава 12 - Продвинутая визуализация — карты, воронки, KPI](../chapter-12/README.md)

---

- 📢 Присоединяйтесь к чату курса: [https://t.me/analytics_course_chat](https://t.me/analytics_course_chat)
- 📢 Канал курса: [https://t.me/analytics_course_channel](https://t.me/analytics_course_channel)